{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8">
    <title>{% block title %}ุขุฏู ุดุงูพ{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% block extra_css %}{% endblock %}
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/akar-icons-fonts"></script>
</head>
<body class="body"
      data-user-authenticated="{% if user.is_authenticated %}true{% else %}false{% endif %}"
      data-user-id="{% if user.is_authenticated %}{{ user.id }}{% endif %}">

<header class="main-header">
    <div class="container nav-container">
        <button id="sidebar-toggle" class="sidebar-toggle" aria-label="ุจุงุฒ ฺฉุฑุฏู ููู">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <a href="{% url 'home' %}" class="logo">
            <span class="logo-icon">ุข</span>
            <span class="logo-text light">ุขุฏู ุดุงูพ</span>
        </a>
        <div class="nav-actions">
            <a href="{% url 'cart' %}" class="btn btn-light small">ุณุจุฏ ุฎุฑุฏ</a>
            {% if user.is_authenticated %}
                <span class="user-name">{{ user.username }}</span>
                <a href="{% url 'logout' %}" class="btn btn-ghost small">ุฎุฑูุฌ</a>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-primary small">ูุฑูุฏ / ุซุจุช ูุงู</a>
            {% endif %}
        </div>
    </div>
</header>

<div id="sidebar-overlay" class="sidebar-overlay"></div>
<aside id="app-sidebar" class="sidebar">
    <header class="sidebar-header">
        <button id="sidebar-close" class="sidebar-close-btn" aria-label="ุจุณุชู ููู">ร</button>
    </header>
    <ul>
        <li>
            <button type="button" onclick="gotoPage(this)" data-url="{% url 'home' %}" class="active">
                <i class="ai-home"></i>
                <p>ุฎุงูู</p>
            </button>
        </li>
        <li>
            <button type="button" onclick="gotoPage(this)" data-url="{% url 'shop' %}">
                <i class="ai-cart"></i>
                <p>ูุฑูุดฺฏุงู</p>
            </button>
        </li>
        <li>
            <button type="button" onclick="gotoPage(this)" data-url="{% url 'news_list' %}">
                <i class="ai-broadcast"></i>
                <p>ุงุฎุจุงุฑ</p>
            </button>
        </li>
        <li>
            <button type="button" onclick="gotoPage(this)" data-url="{% url 'faq' %}">
                <i class="ai-question"></i>
                <p>ุณูุงูุงุช ูุชุฏุงูู</p>
            </button>
        </li>
        <li>
            <button type="button" onclick="gotoPage(this)" data-url="{% url 'contact' %}">
                <i class="ai-phone"></i>
                <p>ุชูุงุณ ุจุง ูุง</p>
            </button>
        </li>
        {% if user.is_staff %}
        <li>
            <button type="button" onclick="gotoPage(this)" data-url="{% url 'admin_chat' %}">
                <i class="ai-chat"></i>
                <p>ูพูู ฺุช ุงุฏูู</p>
            </button>
        </li>
        {% endif %}
    </ul>
    <div class="sidebar-spacer" aria-hidden="true"></div>
</aside>

<main>
    {% block content %}{% endblock %}
</main>

<footer class="main-footer">
    <div class="container footer-top">
        <div class="footer-brand">
            <h4>ุขุฏู ุดุงูพ</h4>
            <p>ุชุฌุฑุจู ุฎุฑุฏ ุขุณุงู ุจุง ูพุดุชุจุงู ุณุฑุนุ ููุชโูุง ุจูโุตุฑูู ู ุงุฑุณุงู ูุทูุฆู.</p>
        </div>
        <div class="footer-column">
            <h4>ููฺฉโูุง ููุฏ</h4>
            <a href="{% url 'shop' %}">ูุฑูุดฺฏุงู</a>
            <a href="{% url 'news_list' %}">ุงุฎุจุงุฑ</a>
            <a href="{% url 'faq' %}">ุณูุงูุงุช ูุชุฏุงูู</a>
        </div>
        <div class="footer-column">
            <h4>ุงุฑุชุจุงุท ุจุง ูุง</h4>
            <a href="{% url 'contact' %}">ูุฑู ุชูุงุณ</a>
            <a href="{% url 'contact' %}">ูพุดุชุจุงู ูุดุชุฑุงู</a>
        </div>
        <div class="footer-column">
            <h4>ุงุทูุงุนุงุช ุชูุงุณ</h4>
            <p>ุชููู: ฐฒฑ-XXXXXXX</p>
            <p>ุงูู: info@example.com</p>
        </div>
    </div>
    <div class="container footer-bottom">
        <p>ุชูุงู ุญููู ุจุฑุง ุขุฏู ุดุงูพ ูุญููุธ ุงุณุช.</p>
    </div>
</footer>

<!-- Global chat -->
<div id="global-chat-toggle" class="floating-chat-btn">
    ๐ฌ
</div>

<!-- Chat widget -->
<div id="global-chat-widget" class="global-chat hidden">
    <div class="global-chat-header">
        <span>ฺุช ุจุง ูพุดุชุจุงู</span>
        <button type="button" id="global-chat-close" class="close-btn">ร</button>
    </div>
    <div id="global-chat-messages" class="global-chat-messages">
        <!-- Messages render here -->
    </div>
    <form id="global-chat-form" class="global-chat-form">
        {% csrf_token %}
        <input id="global-chat-input" type="text" placeholder="ูพุงู ุฎูุฏ ุฑุง ุจููุณุฏ..." autocomplete="off">
        <button type="submit">ุงุฑุณุงู</button>
    </form>
</div>

<!-- JavaScript -->
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
<script src="{% static 'js/chat.js' %}"></script>
<script src="{% static 'js/sidebar.js' %}"></script>
<script src="{% static 'js/theme.js' %}"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
