{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8">
    <title>{% block title %}ุขุฏู ุดุงูพ{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body class="body" data-user-authenticated="{% if user.is_authenticated %}true{% else %}false{% endif %}">

<header class="main-header">
    <div class="container nav-container">
        <a href="{% url 'home' %}" class="logo">
            <span class="logo-icon">๐ฝ</span>
            <span class="logo-text light">ุขุฏู ุดุงูพ</span>
        </a>

        <nav class="nav-links">
            <a href="{% url 'shop' %}">ูุฑูุดฺฏุงู</a>
            <a href="{% url 'news_list' %}">ุงุฎุจุงุฑ</a>
            <a href="{% url 'faq' %}">ุณูุงูุงุช ูุชุฏุงูู</a>
            <a href="{% url 'contact' %}">ุชูุงุณ ุจุง ูุง</a>
            {% if user.is_staff %}
                <a href="{% url 'admin_chat' %}">ฺุช ุงุฏูู</a>
            {% endif %}
        </nav>

        <div class="nav-actions">
            <a href="{% url 'cart' %}" class="btn btn-light small">ุณุจุฏ ุฎุฑุฏ</a>
            {% if user.is_authenticated %}
                <span class="user-name">{{ user.username }}</span>
                <a href="{% url 'logout' %}" class="btn btn-ghost small">ุฎุฑูุฌ</a>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-outline small">ูุฑูุฏ</a>
                <a href="{% url 'signup' %}" class="btn btn-primary small">ุซุจุช ูุงู</a>
            {% endif %}
        </div>
    </div>
</header>

<main>
    {% block content %}{% endblock %}
</main>

<footer class="main-footer">
    <div class="container footer-top">
        <div class="footer-brand">
            <h4>ุขุฏู ุดุงูพ</h4>
            <p>ูุฑูุด ุชุฎุตุต ุชุฌูุฒุงุช ุขุดูพุฒุฎุงูู ุตูุนุช ุจุง ูพุดุชุจุงู ูุงูุน.</p>
        </div>
        <div class="footer-column">
            <h4>ุฏุณุชุฑุณ ุณุฑุน</h4>
            <a href="{% url 'shop' %}">ูุฑูุดฺฏุงู</a>
            <a href="{% url 'news_list' %}">ุงุฎุจุงุฑ</a>
            <a href="{% url 'faq' %}">ุณูุงูุงุช ูุชุฏุงูู</a>
        </div>
        <div class="footer-column">
            <h4>ุฎุฏูุงุช</h4>
            <a href="{% url 'contact' %}">ุฏุฑุฎูุงุณุช ูุดุงูุฑู</a>
            <a href="{% url 'contact' %}">ฺฏุงุฑุงูุช ู ุฎุฏูุงุช ูพุณ ุงุฒ ูุฑูุด</a>
        </div>
        <div class="footer-column">
            <h4>ุงุฑุชุจุงุท</h4>
            <p>ุชููู: ฐฒฑ-xxxxxxx</p>
            <p>ุงูู: info@example.com</p>
        </div>
    </div>
    <div class="container footer-bottom">
        <p>ยฉ ุชูุงู ุญููู ุจุฑุง ุขุฏู ุดุงูพ ูุญููุธ ุงุณุช.</p>
    </div>
</footer>

<!-- ุฏฺฉูู ฺุช ุดูุงูุฑ -->
{% if user.is_authenticated %}
<div id="global-chat-toggle" class="floating-chat-btn">
    ๐ฌ
</div>

<!-- ูพูู ฺุช ุดูุงูุฑ -->
<div id="global-chat-widget" class="global-chat hidden">
    <div class="global-chat-header">
        <span>ฺุช ุขููุงู ุจุง ูพุดุชุจุงู</span>
        <button type="button" id="global-chat-close" class="close-btn">ร</button>
    </div>
    <div id="global-chat-messages" class="global-chat-messages">
        <!-- ูพุงูโูุง ุงูุฌุง ููุงุด ุฏุงุฏู ูโุดููุฏ -->
    </div>
    <form id="global-chat-form" class="global-chat-form">
        {% csrf_token %}
        <input id="global-chat-input" type="text" placeholder="ูพุงู ุฎูุฏ ุฑุง ุจููุณุฏ..." autocomplete="off">
        <button type="submit">ุงุฑุณุงู</button>
    </form>
</div>
{% endif %}

<!-- JavaScript -->
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
<script src="{% static 'js/chat.js' %}"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
