
{% extends 'base.html' %}
{% load static %}

{% block title %}فروشگاه آنلاین آیدین{% endblock %}

{% block content %}
<section class="hero-section">
    <div class="container hero-container">
        <div class="hero-text">
            <p class="hero-badge">فروشگاه آنلاین</p>
            <h1>فروشگاه آنلاین <span>تجهیزات صنعتی آشپزخانه</span></h1>
            <p class="hero-subtitle">
                خرید آسان، سریع و مطمئن محصولات متنوع تجهیزات آشپزخانه صنعتی با بهترین قیمت و پشتیبانی ۲۴ ساعته.
            </p>
            <div class="hero-actions">
                <a href="{% url 'shop' %}" class="btn btn-primary">مشاهده محصولات</a>
                <a href="{% url 'contact' %}" class="btn btn-outline">تماس با ما</a>
                <button type="button" class="btn btn-light small" id="open-category-popup">
                    دسته‌بندی‌ها
                </button>

            </div>
            <div class="hero-meta">
                <span>ارسال رایگان برای سفارش‌های بالای ۱۰۰ میلیون تومان</span>
                <span class="dot"></span>
                <span>بیش از ۱,۰۰۰ مشتری راضی</span>
            </div>
        </div>
        <div class="hero-image">
            <div class="hero-image-main">
                <img src="{% static 'img/hero-shop.jpg' %}" alt="خرید آنلاین" />
                <div class="hero-floating-card">
                    <span class="card-label">مشتری راضی</span>
                    <strong>1,000+</strong>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section why-us">
    <div class="container">
        <h2 class="section-title">چرا فروشگاه ما را انتخاب کنید؟</h2>
        <p class="section-subtitle">
            تجربه خریدی مطمئن با خدمات ویژه، پشتیبانی دائمی و امکان مرجوعی آسان.
        </p>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon circle navy"></div>
                <h3>ارسال سریع</h3>
                <p>ارسال به سراسر کشور در کمترین زمان با بسته‌بندی مطمئن.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon circle green"></div>
                <h3>خرید مطمئن</h3>
                <p>ضمانت اصالت کالا و بازگشت وجه در صورت نارضایتی.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon circle yellow"></div>
                <h3>پشتیبانی ۲۴/۷</h3>
                <p>تیم پشتیبانی حرفه‌ای در تمامی ساعات شبانه‌روز کنار شماست.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon circle orange"></div>
                <h3>ضمانت بازگشت</h3>
                <p>امکان بازگشت کالا تا ۷ روز بدون هیچ‌گونه هزینه اضافی.</p>
            </div>
        </div>
    </div>
</section>

<section class="section best-products">
    <div class="container">
        <h2 class="section-title">محصولات پرفروش</h2>
        <p class="section-subtitle">
            بهترین محصولات ما با کیفیت برتر و قیمت مناسب.
        </p>

        <div class="products-grid">
            {% for product in products %}
            <div class="product-card">
                <div class="product-image">
                    <img src="{% static 'img/product-placeholder.jpg' %}" alt="{{ product.name }}">
                    {% if forloop.first %}
                        <span class="product-badge new">جدید</span>
                    {% elif forloop.counter == 2 %}
                        <span class="product-badge best">پرفروش</span>
                    {% endif %}
                </div>
                <div class="product-info">
                    <h3>{{ product.name }}</h3>
                    <p class="product-domain">{{ product.domain }}</p>
                    <p class="product-price">{{ product.price|floatformat:0 }} تومان</p>
                    <a href="{% url 'product_detail' product.id %}" class="btn btn-outline small">مشاهده</a>
                    <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary small">خرید</a>
                </div>
            </div>
            {% empty %}
            <p class="empty-text">هنوز محصولی ثبت نشده است.</p>
            {% endfor %}
        </div>

        <div class="section-cta-center">
            <a href="{% url 'shop' %}" class="btn btn-outline">مشاهده همه محصولات</a>
        </div>
    </div>
</section>

<section class="section steps">
    <div class="container">
        <h2 class="section-title">نحوه خرید از فروشگاه</h2>
        <p class="section-subtitle">
            تنها با ۴ مرحله ساده، محصول مورد نظر خود را تهیه کنید.
        </p>

        <div class="steps-line">
            <div class="step-item">
                <div class="step-circle">1</div>
                <h3>جستجوی محصول</h3>
                <p>محصول مورد نظر خود را از بین محصولات متنوع جستجو کنید.</p>
            </div>
            <div class="step-item">
                <div class="step-circle">2</div>
                <h3>افزودن به سبد</h3>
                <p>محصولات را به سبد خرید خود اضافه کنید.</p>
            </div>
            <div class="step-item">
                <div class="step-circle">3</div>
                <h3>پرداخت امن</h3>
                <p>پرداخت آنلاین امن از طریق درگاه‌های معتبر بانکی.</p>
            </div>
            <div class="step-item">
                <div class="step-circle">4</div>
                <h3>دریافت سفارش</h3>
                <p>سفارش شما در کوتاه‌ترین زمان به دست‌تان می‌رسد.</p>
            </div>
        </div>
    </div>
</section>

<section class="section cta-banner">
    <div class="container cta-inner">
        <div>
            <h2>آماده شروع خرید هستید؟</h2>
            <p>همین حالا از تخفیف‌های ویژه ما استفاده کنید و بهترین‌ها را انتخاب کنید.</p>
        </div>
        <div>
            <a href="{% url 'shop' %}" class="btn btn-light">شروع خرید</a>
        </div>
    </div>
</section>

<section class="section support">
    <div class="container support-container">
        <div class="support-image">
            <img src="{% static 'img/support.jpg' %}" alt="پشتیبانی">
        </div>
        <div class="support-content">
            <h2 class="section-title right">پشتیبانی حرفه‌ای در هر مرحله</h2>
            <p class="section-subtitle right">
                تیم متخصص ما آماده است تا در هر مرحله از خرید، شما را راهنمایی کند؛ از انتخاب محصول تا پیگیری سفارش.
            </p>
            <div class="support-options">
                <div class="support-card green">
                    <h3>تماس تلفنی</h3>
                    <p>پاسخگویی تلفنی در تمام ساعات شبانه‌روز.</p>
                </div>
                <div class="support-card yellow">
                    <h3>گفتگوی آنلاین</h3>
                    <p>چت زنده با کارشناسان فروش و پشتیبانی.</p>
                </div>
                <div class="support-card orange">
                    <h3>پست الکترونیک</h3>
                    <p>پاسخ‌گویی به ایمیل‌ها در کمتر از ۲۴ ساعت.</p>
                </div>
            </div>
            <div class="support-actions">
                <a href="{% url 'chat' %}" class="btn btn-outline">شروع گفتگو</a>
                <a href="{% url 'contact' %}" class="btn btn-primary">تماس با ما</a>
            </div>
        </div>
    </div>
</section>

<section class="section latest-news">
    <div class="container">
        <h2 class="section-title">آخرین اخبار فروشگاه</h2>
        <div class="news-grid">
            {% for item in news %}
            <article class="news-card">
                <h3>{{ item.title }}</h3>
                <p>{{ item.text|truncatechars:120 }}</p>
                <span class="news-date">{{ item.created_at|date:"Y/m/d" }}</span>
            </article>
            {% empty %}
            <p class="empty-text">هنوز خبری ثبت نشده است.</p>
            {% endfor %}
        </div>
        <div class="section-cta-center">
            <a href="{% url 'news_list' %}" class="btn btn-outline small">مشاهده همه اخبار</a>
        </div>
    </div>
</section>

<div id="category-overlay" class="category-overlay hidden"></div>
<div id="category-popup" class="category-popup hidden">
    <div class="category-popup-inner">
        <div class="popup-header">
            <h2>دسته‌بندی محصولات</h2>
            <button type="button" id="close-category-popup" class="popup-close">✕</button>
        </div>
        <div class="popup-body">
            {% for cat in categories %}
                <a href="{% url 'shop' %}?category={{ cat.id }}" class="category-pill">
                    {{ cat.name }}
                </a>
            {% empty %}
                <p class="empty-text">هنوز دسته‌بندی ثبت نشده است.</p>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
    const overlay = document.getElementById('category-overlay');
    const popup = document.getElementById('category-popup');
    const openBtn = document.getElementById('open-category-popup');
    const closeBtn = document.getElementById('close-category-popup');

    function openPopup() {
        if (!popup) return;
        popup.classList.remove('hidden');
        overlay.classList.remove('hidden');
    }
    function closePopup() {
        if (!popup) return;
        popup.classList.add('hidden');
        overlay.classList.add('hidden');
    }
    if (openBtn) openBtn.addEventListener('click', openPopup);
    if (closeBtn) closeBtn.addEventListener('click', closePopup);
    if (overlay) overlay.addEventListener('click', closePopup);
</script>
{% endblock %}
